"use strict";var app=angular.module("Pickie",["ui.router","ngAnimate"]);!function(){var t="./",e=require("fs");e.watch(t,function(){location&&location.reload()})}(),app.controller("CpController",["$scope","$interval","ClipboardService","Database",function(t,e,i,n){t.clips=JSON.parse(n.get("clips")),i.listener(function(e){t.clips.unshift(e)}),t.$watchCollection("clips",function(){n.set("clips",t.clips)}),t.removeItem=function(e){t.clips.forEach(function(i,n){i==e&&t.clips.splice(n,1)}),e.text==i.current()&&i.erase()},t.clearHistory=function(){t.clips=[],i.erase()},t.copyClip=function(t){i.add(t.text)}}]),app.factory("ClipboardService",["$interval",function(t){function e(){this.clipboard=i.Clipboard.get()}var i=require("nw.gui");return e.prototype.listener=function(e){var i=this,n=i.current();t(function(){var t=i.current();t&&n!=t&&(e({text:t,id:new Date}),n=t)},1e3)},e.prototype.current=function(){return this.clipboard.get("text")},e.prototype.add=function(t){this.clipboard.set(t,"text")},e.prototype.erase=function(){this.clipboard.set("","text")},new e}]),app.factory("Database",function(){function t(){this.database=localStorage}return t.prototype.set=function(t,e){this.database.setItem(t,JSON.stringify(e))},t.prototype.get=function(t){return this.database.getItem(t)},new t});